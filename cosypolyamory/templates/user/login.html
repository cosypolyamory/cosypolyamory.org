{% extends "layout/base.html" %}

{% block title %}{{ page_title or "Login" }}{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-10">
        <h1>{{ page_title or "Login to Cosy Polyamory" }}</h1>
        
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                <div class="mt-3">
                    {% for category, message in messages %}
                        <div class="alert alert-{{ 'danger' if category == 'error' else 'info' if category == 'info' else 'success' }} alert-dismissible fade show" role="alert">
                            {{ message }}
                            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                        </div>
                    {% endfor %}
                </div>
            {% endif %}
        {% endwith %}

        {% if is_signup %}
            <p>
                In order to create a safe community we require all new members to create an account. This allows us to keep the details about our
                events limited to approved members. Please create an account with one of the providers below:
            </p>
        {% else %}
            <p>
                Please login with the provider you used to create your account:
            </p>
        {% endif %}
        
        <div class="d-grid gap-2" style="margin: 30px 3em 0 3em">
            <a href="{{ url_for('auth.oauth_login', provider='google') }}" class="btn btn-danger btn-lg">
                <i class="fab fa-google me-2"></i>{{ "Create Account" if is_signup else "Continue" }} with Google
            </a>
            
            <a href="{{ url_for('auth.oauth_login', provider='github') }}" class="btn btn-dark btn-lg">
                <i class="fab fa-github me-2"></i>{{ "Create Account" if is_signup else "Continue" }} with GitHub
            </a>
            
            <a href="{{ url_for('auth.oauth_login', provider='reddit') }}" class="btn btn-warning btn-lg">
                <i class="fab fa-reddit me-2"></i>{{ "Create Account" if is_signup else "Continue" }} with Reddit
            </a>
            
            <a href="{{ url_for('auth.oauth_login', provider='musicbrainz') }}" class="btn btn-lg" style="background-color: #BA478F; border-color: #BA478F; color: white;">
                <i class="fas fa-music me-2"></i>{{ "Create Account" if is_signup else "Continue" }} with MusicBrainz
            </a>
        </div>
    </div>
</div>
{% endblock %}

{% block styles %}
{{ super() }}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
{% endblock %}
